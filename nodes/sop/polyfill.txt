= PolyFill =

#type: node
#context: sop
#internal: polyfill
#icon: SOP/polyfill
#tags: polygons, fill, hole, patch, model

"""Fills holes with polygonal patches."""

== Using PolyFill ==

# Select at least one edge in each hole you want to fill.

# Click the [Icon:SOP/polyfill][PolyFill|/nodes/sop/polyfill] tool on the __Polygon__ tab.

[Image:/images/nodes/sop/polyfill_pig_head.png]

== Tips ==

* The __Quadrilaterals__ fill mode is most useful for filling in small groups of polygons, and can handle a wider variety of shapes, such as an L-shaped hole or a spiral.

* The __Perfect Grid Quadrilaterals__ fill mode can handle fewer shapes, but often generates a better patch with better interpolated attributes.

* If you are filling in a round hole, the __Perfect Grid Quadrilaterals__ fill mode will likely give you the best results.

* Some holes may require additional smoothing to fix UV values. You can use the __Smooth__ parameter to position the geometry where you like, then append a [Icon:SOP/smooth][UV Smooth|Node:/sop/smooth] to fix the UV values separately.

* If a projection plane normal cannot be found for your geometry, you may want to use the [Icon:SOP/clean][Clean SOP|Node:/sop/clean] to clean up your geometry first, especially consolidating points.

NOTE:
     Each patch is automatically fused to the boundary; however, there is an option to turn on the __Unique Points__ checkbox in the [parameter editor|/ref/panes/parms].

@parameters

Boundary Group:
    A list of boundary edges which define the holes to be filled. If this group is empty, all holes in the input geometry will be filled.

Fill Mode:
    The algorithm used to fill the holes.

    Single Polygon:
        Fills each hole with a single polygon connected to all of the points in the hole.
        
        [Image:/images/nodes/sop/polyfill_single_polygon.png]

    Triangles:
        Fills each hole with triangles. This is the same as filling with a single polygon, then applying a [Divide|/nodes/sop/divide] with __Don't Generate Slivers__ and __Avoid Small Angles__ on.

        [Image:/images/nodes/sop/polyfill_triangles.png]

    Triangle Fan:
        Places a point in the center of the hole and connects it to each point
        on the boundary of the hole.

        [Image:/images/nodes/sop/polyfill_triangle_fan.png]

    Quadrilateral Fan:
        Places a point in the center of the hole and connects it to every other
        point on the boundary of the hole.

        [Image:/images/nodes/sop/polyfill_quadrilateral_fan.png]
    
    Quadrilaterals:
        Fills each hole with quadrilaterals by mimicking how a human might do
        it. It searches for U shaped holes to fill with an extra edge. If none
        can be found it searches for L shaped sections instead, which are
        filled by generating a perfect parallelogram. It prefers to add the
        next quad in the vicinity of last one. This typically gives the best
        results if __Smooth__ is on.

        [Image:/images/nodes/sop/polyfill_quads_algorithm.png]

    Quadrilateral Grid:
        Fills each hole with quadrilaterals in a topologically perfect grid. This typically gives the best results if __Smooth__ is off.

        [Image:/images/nodes/sop/polyfill_perfect_grid_quadrilaterals.png]

Auto-Complete Boundaries:
    Find the rest of each hole when the boundary group only contains part of a hole. Turning this off allows you to select, say five edges of a hole, and the patch will only cover those five edges, not the entire hole.

    [Image:/images/nodes/sop/polyfill_autocomplete_boundaries.png]

Reverse Patches:
    Reverse the orientation of the created polygons.

Unique Points:
    Create patches with their own points.

Update Point Normals:
    Recompute point normals, if they exist.

Edge Loop:
    Create an edge loop around each hole at the given percentage along each
    edge. If __Smooth__ is on, the position of the edge loop is generated after
    any smoothing occurs.

Smooth:
    Smooth the attributes on the patches. This is the same as applying a smooth
    with the given strength.
    
Corner Offset:
    Rotates the corners of the quads generated by the __Perfect Grid
    Quadrilaterals__ and __Quadrilateral Fan__ fill modes.
    
Custom Corners:
    A point group which specifies which boundary points should be corners of quads.
    In the __Quadrilateral Fan__ fill mode, a single corner can be chosen to
    determine where the fan is generated, as there are only two possibilities
    to fill in each hole. In the __Perfect Grid Quadrilaterals__ fill mode, at
    least two adjacent corners of the grid must be included in this group for
    each hole you want to choose corners for. If a hole has no points in this
    group, the most suitable corners will be automatically detected.
    
Deform Patch:
    Allows the patch to be deformed from its default position. The __Triangle
    Fan__ and __Quadrilateral Fan__ fill modes can be extruded with the
    __Surface Offset__ parameter. The __Perfect Grid Quadrilaterals__ fill mode
    creates a smooth perfect grid which can be made to follow the surface of
    the surrounding geometry with the __Surface Offset__ and __Tangent
    Strength__ parameters.
    
Surface Offset:
    The distance to stretch the patch.

    [Image:/images/nodes/sop/polyfill_surface_offset.png]
    
Tangent Strength:
    How strongly the patch follows the surrounding geometry.
    
Patch Group:
    A group that contains the primitives in the interior of the patch.
    
Edge Loop Group:
    A group that contains the primitives adjacent to the edge loop.
    
Append to Groups:
    If a group already exists with the given name, add the primitives to that group instead of replacing it.
    
@related
    - [Node:sop/divide]
    - [Node:sop/smooth]
